type Query {
  getOption(id: ID): Boolean
}

input OptionInput {
  optionId: String!
}

input CreatePuzzleInput {
  puzzleName: String!
  puzzleDescription: String!
  chapterId: String!
}
input Puzzle {
  id: String!
  puzzleId: String!
  puzzleName: String!
  puzzleDescription: String!
  chapterId: String!
}
type ConversationResponse @aws_api_key @aws_iam {
  id: String!
  conversationType: CONVERSATIONTYPE!
  imageUrl: String
  relicId: String
  puzzleId: String
  message: String
  characterId: String
  chapterId: String
}

enum CONVERSATIONTYPE {
  CONVERSATION
  PUZZLE
  RELIC
  GENERATIVE_IMAGE
}

input CreateOptionInput {
  relicId: String
  puzzleId: String
  conversationId: String!
  nextConversationId: String!
  nextStepType: CONVERSATIONTYPE!
  optionText: String!
}

type Option {
  id: String!
  optionId: String!
  relicId: String
  puzzleId: String
  conversationId: String!
  nextConversationId: String!
  nextStepType: CONVERSATIONTYPE!
  optionText: String!
}

input CreateConversationInput {
  message: String!
  chapterId: String!
  characterId: String!
}
type Conversation {
  id: String!
  message: String!
  conversationId: String!
  chapterId: String!
  characterId: String!
}

input NotifyOptionResponseInput {
  id: String!
  conversationType: CONVERSATIONTYPE!
  imageUrl: String
  relicId: String
  puzzleId: String
  message: String
  characterId: String
  chapterId: String
}

type Mutation {
  createConversationPuzzle(input: CreatePuzzleInput!): Puzzle! @aws_api_key
  createConversationOption(input: CreateOptionInput!): Option! @aws_api_key
  createConversation(input: CreateConversationInput!): Conversation!
    @aws_api_key
  sendOption(input: OptionInput!): Boolean! @aws_api_key
  notifyOptionResponse(
    input: NotifyOptionResponseInput!
  ): ConversationResponse! @aws_iam @aws_api_key
}

type Subscription {
  onOptionResponse: ConversationResponse
    @aws_subscribe(mutations: ["notifyOptionResponse"])
}
